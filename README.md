# HSE Finam Hackathon - Financial Forecasting

–†–µ—à–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π —Ä–æ—Å—Ç–∞ –∞–∫—Ü–∏–π –Ω–∞ 1-20 –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ü–µ–Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–æ–≤–æ—Å—Ç–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.

## üéØ –ó–∞–¥–∞—á–∞

–ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Ä–æ—Å—Ç–∞ —Ü–µ–Ω—ã –∞–∫—Ü–∏–π –Ω–∞ –∫–∞–∂–¥—ã–π –∏–∑ 20 –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–∫–µ—Ä–∞.

**–§–æ—Ä–º–∞—Ç –≤—ã—Ö–æ–¥–∞**: `ticker,p1,p2,p3,...,p20` –≥–¥–µ p_i - –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ä–æ—Å—Ç–∞ –Ω–∞ –¥–µ–Ω—å i.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd final_solution
pip install -r requirements.txt
```

### 2. –ó–∞–ø—É—Å–∫ –¥–µ–º–æ

```bash
cd final_solution
jupyter notebook demo.ipynb
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Python:

```python
from final_solution.solution import FinancialForecaster

# –û–±—É—á–µ–Ω–∏–µ
model = FinancialForecaster()
model.fit('forecast_data/candles.csv', 'forecast_data/news.csv')
model.save('trained_model.pkl')

# –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ
model.predict('forecast_data/candles_2.csv', 'forecast_data/news_2.csv', 'submission.csv')
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ submission

```bash
cd final_solution
python test_format.py submission.csv
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ final_solution/          # –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ solution.py         # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å FinancialForecaster
‚îÇ   ‚îú‚îÄ‚îÄ demo.ipynb          # –î–µ–º–æ –Ω–æ—É—Ç–±—É–∫ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_format.py      # –í–∞–ª–∏–¥–∞—Ç–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞ submission
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt    # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ *.md                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ forecast_data/          # –î–∞–Ω–Ω—ã–µ (–Ω–µ –≤ git)
‚îÇ   ‚îú‚îÄ‚îÄ candles.csv        # OHLCV –¥–∞–Ω–Ω—ã–µ (train)
‚îÇ   ‚îú‚îÄ‚îÄ news.csv           # –ù–æ–≤–æ—Å—Ç–∏ (train)
‚îÇ   ‚îú‚îÄ‚îÄ candles_2.csv      # OHLCV –¥–∞–Ω–Ω—ã–µ (test)
‚îÇ   ‚îî‚îÄ‚îÄ news_2.csv         # –ù–æ–≤–æ—Å—Ç–∏ (test)
‚îú‚îÄ‚îÄ correct_submission_sample.csv  # –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞
‚îî‚îÄ‚îÄ README.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –ú–æ–¥–µ–ª–∏
- **20 CatBoost –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤** - –ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å (1-20)
- –ö–∞–∂–¥—ã–π –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ä–æ—Å—Ç–∞: P(return > 0)

### –§–∏—á–∏ (120+)
- **70+ —Ü–µ–Ω–æ–≤—ã—Ö —Ñ–∏—á–µ–π**: returns, volatility, RSI, MACD, Bollinger Bands, –æ–±—ä–µ–º—ã
- **50+ –Ω–æ–≤–æ—Å—Ç–Ω—ã—Ö —Ñ–∏—á–µ–π**: sentiment, –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –ø–æ –æ–∫–Ω–∞–º (1d, 3d, 7d, 14d, 30d)
- **–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è**: 4 –∫–ª–∞—Å—Ç–µ—Ä–∞ —Ç–∏–∫–µ—Ä–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞–ª–∏–∑–∞—Ü–∏–∏

### Sentiment Analysis
- Keyword-based –ø–æ–¥—Ö–æ–¥ (56 –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤)
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä—É—Å—Å–∫–∏—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
- –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

## üìù –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

### –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**candles.csv**:
```csv
ticker,begin,open,high,low,close,volume
AFLT,2020-06-19,52.5,53.2,52.1,52.8,1000000
```

**news.csv**:
```csv
publish_date,title,publication
2020-06-19,"–ó–∞–≥–æ–ª–æ–≤–æ–∫","–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏"
```

### –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (submission.csv)

```csv
ticker,p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19,p20
AFLT,0.51,0.52,0.48,0.50,0.53,0.49,0.51,0.52,0.50,0.51,0.52,0.50,0.51,0.49,0.50,0.51,0.52,0.48,0.50,0.53
SBER,0.49,0.53,0.51,0.50,0.52,0.48,0.50,0.51,0.49,0.50,0.51,0.49,0.50,0.52,0.51,0.50,0.49,0.53,0.51,0.50
```

**–í–∞–∂–Ω–æ**:
- –û–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –Ω–∞ —Ç–∏–∫–µ—Ä
- p1-p20 - –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Ä–æ—Å—Ç–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [0, 1]
- –ë–µ–∑ –¥–∞—Ç –∏ returns

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ –ø–∞–ø–∫–µ `final_solution/`:

- **[USAGE.md](final_solution/USAGE.md)** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- **[FORMAT_SPECIFICATION.md](final_solution/FORMAT_SPECIFICATION.md)** - –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞
- **[STATUS.md](final_solution/STATUS.md)** - –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞
- **[CHANGELOG.md](final_solution/CHANGELOG.md)** - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

```
pandas>=1.5.0
numpy>=1.23.0
scikit-learn>=1.2.0
catboost>=1.2.0
```

Python 3.8+

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–û–±—É—á–µ–Ω–∏–µ**: ~5-7 –º–∏–Ω—É—Ç (20 –º–æ–¥–µ–ª–µ–π)
- **–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ**: ~30 —Å–µ–∫—É–Ω–¥
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏**: ~2GB

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞
python -c "from final_solution.solution import FinancialForecaster; print('‚úÖ OK')"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞
cd final_solution
python test_format.py submission.csv
```

## üìà –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –≤ [demo.ipynb](final_solution/demo.ipynb).

–ö—Ä–∞—Ç–∫–∏–π –ø—Ä–∏–º–µ—Ä:

```python
from final_solution.solution import FinancialForecaster

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
model = FinancialForecaster(random_state=42)

# –û–±—É—á–µ–Ω–∏–µ
model.fit(
    candles_path='forecast_data/candles.csv',
    news_path='forecast_data/news.csv'
)

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
model.save('trained_model.pkl')

# –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ
submission = model.predict(
    candles_path='forecast_data/candles_2.csv',
    news_path='forecast_data/news_2.csv',
    output_path='submission.csv'
)

print(submission.head())
#   ticker    p1    p2    p3  ...   p20
# 0   AFLT  0.51  0.52  0.48  ...  0.53
# 1   SBER  0.49  0.53  0.51  ...  0.50
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

**v2.0** (2025-10-05):
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç submission: `ticker,p1-p20`
- ‚úÖ 20 –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤–º–µ—Å—Ç–æ 6 –º–æ–¥–µ–ª–µ–π
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã LGBM –∏ Ridge —Ä–µ–≥—Ä–µ—Å—Å–æ—Ä—ã
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞

–°–º. [CHANGELOG.md](final_solution/CHANGELOG.md) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

HSE Finam Hackathon 2024

## üë• –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ –ø–∞–ø–∫–µ `final_solution/`.
